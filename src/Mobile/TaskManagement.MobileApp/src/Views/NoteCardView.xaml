<?xml version="1.0" encoding="utf-8"?>

<ContentView x:Class="TaskManagement.MobileApp.Views.NoteCardView"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:vm="clr-namespace:TaskManagement.MobileApp.ViewModels"
             xmlns:viewModels="clr-namespace:TaskManagement.MobileApp.ViewModels"
             x:DataType="viewModels:NoteItemViewModel">

    <Border BackgroundColor="White"
            Stroke="LightGray"
            StrokeThickness="1"
            Padding="16"
            Margin="8,4"
            StrokeShape="RoundRectangle 8,8,8,8"
            Shadow="2,2,6, #55000000">

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <!-- Note Content -->
            <StackLayout Grid.Row="0"
                         Grid.Column="1"
                         Grid.RowSpan="2"
                         Spacing="4"
                         VerticalOptions="Center">

                <Label Text="Notitie:"
                       TextColor="Gray"
                       FontSize="12"
                       FontAttributes="Bold" />

                <Label Text="{Binding Content}"
                       TextColor="Black"
                       FontSize="14"
                       LineBreakMode="WordWrap" />

                <Label Text="{Binding CreatedAt, StringFormat='{0:dd/MM/yyyy HH:mm}'}"
                       TextColor="Gray"
                       FontSize="10" />
            </StackLayout>

            <!-- Delete Button -->
            <ImageButton Grid.Row="0"
                         Grid.Column="2"
                         Source="delete_icon.png"
                         BackgroundColor="Transparent"
                         WidthRequest="24"
                         HeightRequest="24"
                         Scale="0.7"
                         VerticalOptions="Start"
                         Command="{Binding Source={RelativeSource AncestorType={x:Type viewModels:TaskDetailsViewModel}}, Path=DeleteNoteCommand}"
                         CommandParameter="{Binding .}"
                         IsVisible="{Binding CanDelete}">
            </ImageButton>

        </Grid>
    </Border>
</ContentView>